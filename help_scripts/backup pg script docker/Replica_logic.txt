Чтобы перевести реплику в состояние мастера достаточно выполнить
одну команду:
sudo pg_ctlcluster 13 main2 promote

ALTER SYSTEM SET wal_level TO logical;
SELECT pg_reload_conf();

Добавить пароь на юзера postgres
ALTER USER postgres PASSWORD 'postgres';

Отменить синхронизаццию
ALTER SYSTEM SET synchronous_standby_names TO  '';

Создать на Slave кластере таблицу логической репликации:
create database logical;
create table t (t int);
insert into t values(10);
select * from t;

На мастере создаем публикацию
CREATE PUBLICATION test_pub FOR TABLE test;
посмотреть на публикации:
select * from pg_publication;
select * from pg_publication_tables;

На slave создаем подписку
CREATE SUBSCRIPTION test_sub 
CONNECTION 'host=localhost port=5432 user=postgres password=otus$123 dbname=postgres' 
PUBLICATION test_pub WITH (copy_data = false);

смотрим изменения
select * from t;

